<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solance - Learning that gets you</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Lora:ital,wght@0,500;0,600;1,500&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        :root {
            /* Shared Cozy Palette */
            --bg-warm: #FFF8F3;
            --text-coffee: #4A4036;
            --accent-sage: #88B795; 
            --accent-coral: #FF9B85;
            --accent-sun: #FFD275;
            --surface-white: #FFFFFF;
        }

        body {
            background-color: var(--bg-warm);
            color: var(--text-coffee);
            font-family: 'Nunito', sans-serif;
            overflow-x: hidden;
        }

        .serif-font { font-family: 'Lora', serif; }
        .math-font { font-family: 'Lora', serif; }

        /* Floating Blobs */
        .blob-bg {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -1; overflow: hidden; pointer-events: none;
        }
        .blob {
            position: absolute;
            border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
            filter: blur(80px);
            opacity: 0.6;
            animation: float 25s infinite alternate;
        }
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(40px, 40px) rotate(5deg); }
        }
        .blob-1 { width: 600px; height: 600px; background: #FFE4D6; top: -10%; left: -10%; }
        .blob-2 { width: 500px; height: 500px; background: #E0F2E9; bottom: -10%; right: -10%; animation-delay: -5s; }
        .blob-3 { width: 300px; height: 300px; background: #FFF4D6; top: 40%; left: 40%; opacity: 0.5; animation-delay: -10s; }

        /* --- HOMEPAGE STYLES --- */
        .hero-card {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border: 2px solid white;
            border-radius: 32px;
            box-shadow: 0 20px 40px rgba(74, 64, 54, 0.05);
            transition: transform 0.3s ease;
        }
        .hero-card:hover { transform: translateY(-5px); }

        .omnibar-container {
            background: white;
            border-radius: 99px;
            box-shadow: 0 15px 40px rgba(74, 64, 54, 0.12);
            padding: 8px;
            border: 3px solid white;
            transition: all 0.3s ease;
            max-width: 500px;
            width: 100%;
            display: flex;
            align-items: center;
            position: relative;
        }
        .omnibar-container:focus-within {
            border-color: var(--accent-coral);
            transform: scale(1.02);
        }

        .omnibar-input {
            background: transparent;
            border: none;
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--text-coffee);
            padding-left: 24px;
            width: 100%;
        }
        .omnibar-input:focus { outline: none; }

        .go-btn {
            background: var(--text-coffee);
            color: white;
            border-radius: 50%;
            width: 56px; height: 56px; min-width: 56px;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer; border: none;
        }
        .go-btn:hover { transform: scale(1.1) rotate(10deg); background: #2C2620; }

        .step-icon {
            width: 64px; height: 64px; border-radius: 20px;
            display: flex; align-items: center; justify-content: center;
            font-size: 32px; margin-bottom: 16px; transition: transform 0.3s ease;
        }
        .step-item:hover .step-icon { transform: rotate(10deg) scale(1.1); }
        
        .topic-tag {
            background: rgba(255,255,255,0.5);
            border: 1px solid rgba(255,255,255,0.8);
            padding: 6px 16px; border-radius: 20px;
            font-size: 0.9rem; font-weight: 700; color: var(--text-coffee);
            opacity: 0.6; cursor: pointer; transition: all 0.2s;
        }
        .topic-tag:hover {
            background: white; opacity: 1; transform: translateY(-2px); color: var(--accent-coral);
        }

        .hackathon-toast {
            position: absolute; top: -60px; left: 50%;
            transform: translateX(-50%) translateY(10px);
            background: #2C2620; color: white; padding: 10px 20px;
            border-radius: 16px; font-size: 0.9rem; font-weight: 700;
            white-space: nowrap; opacity: 0; pointer-events: none;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1); z-index: 50;
        }
        .hackathon-toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
        .hackathon-toast::after {
            content: ''; position: absolute; bottom: -6px; left: 50%;
            transform: translateX(-50%); border-left: 6px solid transparent;
            border-right: 6px solid transparent; border-top: 6px solid #2C2620;
        }

        /* --- APP VIEW STYLES --- */
        .bubble-card {
            background: var(--surface-white);
            border-radius: 24px; border-bottom-left-radius: 4px;
            box-shadow: 0 8px 20px rgba(74, 64, 54, 0.06);
            padding: 24px; border: 2px solid rgba(255,255,255,0.5);
        }
        .user-bubble {
            background: var(--accent-sage); color: white;
            border-radius: 24px; border-bottom-right-radius: 4px;
            padding: 16px 32px; box-shadow: 0 4px 12px rgba(136, 183, 149, 0.3);
        }
        .pop-in {
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            opacity: 0; transform: scale(0.9) translateY(20px);
        }
        @keyframes popIn { to { opacity: 1; transform: scale(1) translateY(0); } }
        
        .step-faded {
            opacity: 0.4; transform: scale(0.98); filter: grayscale(0.5);
            transition: all 0.5s ease;
        }

        .cozy-input-container {
            background: white; border-radius: 99px;
            box-shadow: 0 10px 30px rgba(74, 64, 54, 0.08);
            padding: 8px; border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        .cozy-input-container:focus-within {
            border-color: var(--accent-sage); transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(136, 183, 149, 0.2);
        }
        .cozy-input {
            background: transparent; border: none;
            font-family: 'Nunito', sans-serif; font-weight: 700;
            font-size: 1.5rem; color: var(--text-coffee); text-align: center;
        }
        .cozy-input:focus { outline: none; }

        .fun-btn {
            background: var(--accent-sage); color: white;
            border-radius: 50%; width: 56px; height: 56px;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .fun-btn:hover { transform: scale(1.1) rotate(10deg); background: #74A381; }

        .shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake {
            10%, 90% { transform: translate3d(-2px, 0, 0); }
            20%, 80% { transform: translate3d(4px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col relative">

    <!-- Shared Ambience -->
    <div class="blob-bg">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <!-- Shared Nav -->
    <nav class="w-full px-6 py-6 flex justify-between items-center z-10">
        <div class="flex items-center gap-2 text-2xl font-extrabold tracking-tight text-amber-900 cursor-pointer" onclick="showHome()">
            <i class="ph-fill ph-plant text-green-500"></i>
            Solance.
        </div>
        <div id="nav-right-actions">
            <!-- Dynamic based on view -->
            <a href="#" class="text-stone-600 font-bold hover:text-stone-900 transition" id="login-btn">Log In</a>
        </div>
    </nav>

    <!-- ================= VIEW: HOMEPAGE ================= -->
    <div id="homepage-view" class="flex-grow flex flex-col items-center justify-center transition-all duration-500">
        
        <main class="flex flex-col items-center justify-center text-center px-4 relative z-10 mt-8 md:mt-0">
            <!-- Badge -->
            <div class="inline-flex items-center gap-2 bg-white text-stone-600 px-4 py-1.5 rounded-full text-sm font-bold mb-8 shadow-sm border border-stone-100">
                <i class="ph-fill ph-sparkle text-yellow-400"></i> The Hyper-Personalized Learning Engine
            </div>

            <!-- Headline -->
            <h1 class="text-5xl md:text-7xl font-black text-stone-800 mb-6 leading-[1.1]">
                Master anything, <br>
                <span class="serif-font italic text-orange-500 relative inline-block">
                    at your own rhythm.
                    <svg class="absolute -bottom-2 left-0 w-full" height="10" viewBox="0 0 200 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.00026 6.99997C58.4355 1.8526 135.645 1.8526 198.001 6.99997" stroke="#FF9B85" stroke-width="3" stroke-linecap="round"/></svg>
                </span>
            </h1>

            <!-- Subheadline -->
            <p class="text-lg md:text-xl text-stone-500 max-w-2xl mb-10 font-medium leading-relaxed">
                From <span class="text-stone-800 font-bold">Python</span> to <span class="text-stone-800 font-bold">Piano</span>, Solance smooths out the learning curve. 
                No rigid courses. Just an adaptive path that evolves with you.
            </p>

            <!-- Omnibar -->
            <div class="omnibar-container mb-2 mx-auto relative">
                <div id="hackathon-msg" class="hackathon-toast">
                    ðŸš§ Hackathon Demo: Loading Algebra Module...
                </div>

                <input type="text" id="topic-input" class="omnibar-input" placeholder="What do you want to learn?" value="Algebra Basics">
                <button id="start-btn" class="go-btn">
                    <i class="ph-bold ph-arrow-right text-xl"></i>
                </button>
            </div>
            
            <div class="text-xs font-bold text-stone-400 uppercase tracking-widest mb-6">
                <i class="ph-fill ph-flask text-orange-400"></i> Live Demo: Algebra Module
            </div>

            <!-- Tags -->
            <div class="flex flex-wrap justify-center gap-3 mb-20">
                <span class="topic-tag" onclick="setTopic('Spanish Verbs')">Spanish Verbs</span>
                <span class="topic-tag" onclick="setTopic('React Hooks')">React Hooks</span>
                <span class="topic-tag" onclick="setTopic('Art History')">Art History</span>
                <span class="topic-tag" onclick="setTopic('Quantum Physics')">Quantum Physics</span>
            </div>

            <!-- Steps -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-5xl px-4 mb-20">
                <div class="hero-card p-8 text-left step-item">
                    <div class="step-icon bg-amber-100 text-amber-600"><i class="ph-fill ph-lightning"></i></div>
                    <h3 class="text-xl font-bold text-stone-800 mb-2">1. Pick Any Topic</h3>
                    <p class="text-stone-500 leading-relaxed">Type what you're curious about. We generate a custom micro-path instantly.</p>
                </div>
                <div class="hero-card p-8 text-left step-item">
                    <div class="step-icon bg-indigo-100 text-indigo-600"><i class="ph-fill ph-faders"></i></div>
                    <h3 class="text-xl font-bold text-stone-800 mb-2">2. Live Adaptation</h3>
                    <p class="text-stone-500 leading-relaxed">Struggling? We break it down. Breezing through? We ramp it up. Real-time.</p>
                </div>
                <div class="hero-card p-8 text-left step-item">
                    <div class="step-icon bg-rose-100 text-rose-600"><i class="ph-fill ph-heart"></i></div>
                    <h3 class="text-xl font-bold text-stone-800 mb-2">3. Fun & Fluid</h3>
                    <p class="text-stone-500 leading-relaxed">Learning shouldn't feel like work. We make the hard stuff feel cozy and doable.</p>
                </div>
            </div>
        </main>
        <footer class="w-full py-8 text-center text-stone-400 text-sm font-medium">
            Built for the future of learning.
        </footer>
    </div>


    <!-- ================= VIEW: APP PROTOTYPE ================= -->
    <div id="app-view" class="hidden flex-grow flex-col items-center justify-center w-full max-w-3xl mx-auto px-4 pb-24 relative">
        
        <!-- Problem Header -->
        <div id="problem-header" class="mb-10 text-center transition-all duration-500 mt-8">
            <div class="inline-block px-4 py-1 bg-white/60 rounded-full text-sm font-bold text-stone-500 mb-4 backdrop-blur-sm border border-white">
                ðŸš© MISSION
            </div>
            <h1 class="text-4xl md:text-6xl font-bold text-stone-800 math-font leading-tight">
                Find <span class="italic text-orange-500">x</span> in <br>
                2x + 4 = 10
            </h1>
        </div>

        <!-- Chat Stream -->
        <div id="interaction-container" class="w-full flex flex-col gap-6"></div>

        <!-- Input Area -->
        <div id="input-area" class="w-full max-w-xl mt-12 opacity-0 transition-all duration-700 sticky bottom-8">
            <div class="cozy-input-container flex items-center relative">
                <input type="text" id="user-input" 
                    class="cozy-input flex-grow py-3 placeholder-stone-300" 
                    placeholder="Type here..." 
                    autocomplete="off">
                
                <button id="app-submit-btn" class="fun-btn shadow-lg">
                    <i class="ph-bold ph-arrow-right text-xl"></i>
                </button>
            </div>
            
            <div id="feedback-msg" class="text-center mt-4 text-base font-bold text-rose-500 h-6 opacity-0 transition-opacity flex items-center justify-center gap-2">
                <i class="ph-fill ph-warning-circle"></i> <span>Oops! Try again.</span>
            </div>
        </div>
    </div>

    <!-- Result Card Modal -->
    <div id="report-overlay" class="fixed inset-0 bg-stone-900/10 backdrop-blur-md z-50 hidden flex items-center justify-center opacity-0 transition-all duration-500">
        <div class="bg-white w-full max-w-md rounded-[32px] p-8 transform scale-90 transition-all duration-500 shadow-2xl border-4 border-white relative overflow-hidden" id="report-card">
            <div class="absolute top-0 right-0 p-8 opacity-10 pointer-events-none">
                <i class="ph-fill ph-confetti text-9xl text-orange-500"></i>
            </div>
            <div class="text-center mb-6">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-green-100 text-green-600 rounded-full mb-4 text-3xl shadow-inner">
                    <i class="ph-fill ph-check"></i>
                </div>
                <h2 class="text-3xl font-black text-stone-800 mb-1">Nice Job!</h2>
                <p class="text-stone-500 font-semibold">You nailed it.</p>
            </div>
            <div class="bg-orange-50 rounded-2xl p-5 mb-8 border border-orange-100">
                <div class="flex items-center gap-2 mb-2 text-orange-600 font-bold text-sm uppercase tracking-wide">
                    <i class="ph-bold ph-lightbulb"></i> Quick Tip
                </div>
                <p class="text-stone-700 leading-relaxed text-sm md:text-base">
                    Youâ€™re great at isolating variables! Just remember: moving a <strong>positive</strong> number across the <span class="math-font text-lg">=</span> makes it <strong>negative</strong>.
                </p>
            </div>
            <button onclick="resetApp()" class="w-full bg-stone-800 hover:bg-black text-white text-lg font-bold py-4 rounded-2xl transition-all transform hover:scale-[1.02] hover:-rotate-1 shadow-xl flex items-center justify-center gap-2">
                <span>Next Challenge</span>
                <i class="ph-bold ph-arrow-right"></i>
            </button>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script>
        // --- STATE MANAGEMENT ---
        const homeView = document.getElementById('homepage-view');
        const appView = document.getElementById('app-view');
        const navRight = document.getElementById('nav-right-actions');

        function showHome() {
            homeView.classList.remove('hidden');
            homeView.style.display = 'flex';
            appView.classList.add('hidden');
            appView.style.display = 'none';
            navRight.innerHTML = `<a href="#" class="text-stone-600 font-bold hover:text-stone-900 transition" id="login-btn">Log In</a>`;
        }

        function showApp() {
            homeView.classList.add('hidden');
            homeView.style.display = 'none';
            appView.classList.remove('hidden');
            appView.style.display = 'flex';
            
            // Update Nav for App Mode
            navRight.innerHTML = `
                 <div class="hidden md:flex items-center gap-1 px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm font-bold mr-4">
                    <i class="ph-fill ph-fire"></i> 3 Day Streak
                </div>
                <button class="w-10 h-10 rounded-full bg-white border-2 border-stone-100 text-stone-600 flex items-center justify-center hover:bg-stone-50 transition shadow-sm">
                    <i class="ph-bold ph-user"></i>
                </button>
            `;

            // Start the App Logic
            initAppLogic();
        }

        // --- HOMEPAGE LOGIC ---
        const input = document.getElementById('topic-input');
        const startBtn = document.getElementById('start-btn');
        const toast = document.getElementById('hackathon-msg');
        const defaultTopic = "Algebra Basics";

        function setTopic(text) {
            input.value = text;
            input.focus();
        }

        startBtn.addEventListener('click', (e) => {
            e.preventDefault();
            handleLaunch();
        });

        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleLaunch();
        });

        function handleLaunch() {
            const currentVal = input.value.trim().toLowerCase();
            
            if (!currentVal.includes('algebra')) {
                // Hackathon Constraint Logic
                toast.innerText = `ðŸ§ª Preview Mode: Only Algebra is available for now!`;
                toast.classList.add('show');
                
                input.style.transition = "color 0.2s";
                input.style.color = "transparent";
                
                setTimeout(() => {
                    input.value = defaultTopic;
                    input.style.color = "var(--text-coffee)";
                }, 3000);

                setTimeout(() => {
                    showApp();
                }, 3000);
            } else {
                showApp();
            }
        }


        // --- APP LOGIC ---
        const steps = [
            {
                id: 1,
                ai_text: "Hey! Let's solve this together. First, we need to get that <strong class='text-orange-500'>2x</strong> by itself. Can you move the <span class='bg-white px-2 py-0.5 rounded-md border shadow-sm'>+4</span> to the other side?",
                correct_answers: ["6"],
                hint_response: "Almost! Remember, +4 becomes -4 on the other side. Try 10 - 4.",
                success_msg: "Yes! 10 - 4 is 6."
            },
            {
                id: 2,
                ai_text: "Awesome. So now we have <span class='math-font text-xl font-bold text-stone-800'>2x = 6</span>. What is x?",
                correct_answers: ["3"],
                hint_response: "Not quite! Divide both sides by 2.",
                success_msg: "Perfecto."
            }
        ];

        let currentStepIndex = 0;
        const chatContainer = document.getElementById('interaction-container');
        const inputArea = document.getElementById('input-area');
        const appInput = document.getElementById('user-input');
        const feedbackMsg = document.getElementById('feedback-msg');
        const reportOverlay = document.getElementById('report-overlay');
        const reportCard = document.getElementById('report-card');

        function initAppLogic() {
            // Reset state
            currentStepIndex = 0;
            chatContainer.innerHTML = '';
            inputArea.classList.add('opacity-0');
            
            setTimeout(() => {
                renderStep(currentStepIndex);
                inputArea.classList.remove('opacity-0');
            }, 500);
        }

        function renderStep(index) {
            const step = steps[index];
            const msgDiv = document.createElement('div');
            msgDiv.className = 'pop-in flex flex-col items-start gap-3 w-full';
            msgDiv.innerHTML = `
                <div class="flex items-center gap-2 ml-1">
                    <div class="w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-sm font-bold shadow-sm">
                        <i class="ph-fill ph-robot"></i>
                    </div>
                    <span class="text-xs font-bold text-stone-400 uppercase tracking-wide">Tutor</span>
                </div>
                <div class="bubble-card text-lg md:text-xl font-medium text-stone-700 leading-relaxed w-full md:w-auto md:max-w-[90%]">
                    ${step.ai_text}
                </div>
            `;
            chatContainer.appendChild(msgDiv);
            appInput.value = '';
            appInput.focus();
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }

        function handleAppSubmit() {
            const val = appInput.value.trim();
            if (!val) return;

            const userDiv = document.createElement('div');
            userDiv.className = 'pop-in flex flex-col items-end gap-2 mt-2 mb-6 self-end w-full';
            userDiv.innerHTML = `
                <div class="user-bubble text-2xl math-font shadow-md">
                    ${val}
                </div>
            `;
            chatContainer.appendChild(userDiv);

            const currentStep = steps[currentStepIndex];
            
            if (currentStep.correct_answers.includes(val)) {
                feedbackMsg.style.opacity = '0';
                Array.from(chatContainer.children).forEach(child => {
                    child.classList.add('step-faded');
                });
                currentStepIndex++;

                if (currentStepIndex < steps.length) {
                    setTimeout(() => renderStep(currentStepIndex), 500);
                } else {
                    setTimeout(triggerEndScreen, 800);
                }
            } else {
                feedbackMsg.innerHTML = `<i class="ph-bold ph-warning-circle"></i> <span>${currentStep.hint_response}</span>`;
                feedbackMsg.style.opacity = '1';
                document.querySelector('.cozy-input-container').classList.add('shake');
                setTimeout(() => document.querySelector('.cozy-input-container').classList.remove('shake'), 500);
                appInput.value = '';
            }
        }

        function triggerEndScreen() {
            reportOverlay.classList.remove('hidden');
            requestAnimationFrame(() => {
                reportOverlay.classList.remove('opacity-0');
                reportCard.classList.remove('scale-90');
                reportCard.classList.add('scale-100');
            });
            inputArea.style.opacity = '0';
            chatContainer.style.filter = 'blur(4px)';
        }

        function resetApp() {
            // Just reload for prototype simplicity, or reset JS state
            // location.reload(); // Cannot do reload in this single file setup easily if we want to stay in app flow
            
            // Reset UI manually
            reportOverlay.classList.add('hidden');
            reportOverlay.classList.add('opacity-0');
            chatContainer.style.filter = 'none';
            initAppLogic();
        }

        document.getElementById('app-submit-btn').addEventListener('click', handleAppSubmit);
        appInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') handleAppSubmit();
        });

    </script>
</body>
</html>